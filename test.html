<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HubSpot Form Selector - Test</title>
    <style>
        body {
            margin: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 14px;
            max-width: 400px;
        }
        .form-selector {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .search-input, .form-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        .search-input:focus, .form-select:focus {
            outline: none;
            border-color: #0073e6;
        }
        .form-select {
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            font-size: 16px;
            line-height: 1.5;
            border-radius: 8px;
            padding-left: 8px;
        }
        .form-select option {
            padding: 6px 12px;
            margin: 2px 0;
        }
        .form-select option:checked {
            background-color: #0073e6;
            color: white;
            border-radius: 6px;
        }
        .selected-form {
            background: #e8f4ff;
            padding: 12px;
            border-radius: 4px;
            border: 1px solid #0073e6;
        }
        .selected-label {
            font-weight: 600;
            margin-bottom: 4px;
            color: #0073e6;
        }
        .selected-name {
            color: #333;
            margin-bottom: 4px;
        }
        .selected-id {
            color: #666;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
        }
        h1 {
            font-size: 18px;
            margin: 0 0 20px 0;
        }
    </style>
</head>
<body>
    <h1>HubSpot Form Selector Test</h1>
    <div class="form-selector">
        <input 
            type="text" 
            id="searchInput" 
            placeholder="Search forms by name..."
            class="search-input"
        />
        <select id="formSelect" class="form-select" size="6">
            <!-- Options will be added by JavaScript -->
        </select>
        <div id="selectedForm" class="selected-form" style="display: none;">
            <div class="selected-label">Selected Form:</div>
            <div id="selectedName" class="selected-name"></div>
            <div id="selectedId" class="selected-id"></div>
        </div>
    </div>

    <script>
        // Hardcoded HubSpot forms for testing
        const forms = [
            { id: "123e4567-e89b-12d3-a456-426614174000", name: "Contact Us Form" },
            { id: "223e4567-e89b-12d3-a456-426614174001", name: "Newsletter Signup" },
            { id: "323e4567-e89b-12d3-a456-426614174002", name: "Demo Request Form" },
            { id: "423e4567-e89b-12d3-a456-426614174003", name: "Support Ticket Form" },
            { id: "523e4567-e89b-12d3-a456-426614174004", name: "Webinar Registration" },
            { id: "623e4567-e89b-12d3-a456-426614174005", name: "Free Trial Request" },
            { id: "723e4567-e89b-12d3-a456-426614174006", name: "Partner Application" },
            { id: "823e4567-e89b-12d3-a456-426614174007", name: "Event Registration" },
            { id: "923e4567-e89b-12d3-a456-426614174008", name: "Feedback Form" },
            { id: "a23e4567-e89b-12d3-a456-426614174009", name: "Quote Request" }
        ];

        const searchInput = document.getElementById('searchInput');
        const formSelect = document.getElementById('formSelect');
        const selectedFormDiv = document.getElementById('selectedForm');
        const selectedNameDiv = document.getElementById('selectedName');
        const selectedIdDiv = document.getElementById('selectedId');

        // Function to render forms
        function renderForms(formsToShow) {
            formSelect.innerHTML = '';
            
            if (formsToShow.length === 0) {
                const option = document.createElement('option');
                option.textContent = 'No forms found';
                option.disabled = true;
                formSelect.appendChild(option);
            } else {
                formsToShow.forEach((form, index) => {
                    const option = document.createElement('option');
                    option.value = form.id;
                    option.textContent = form.name;
                    // Auto-select the first option
                    if (index === 0) {
                        option.selected = true;
                    }
                    formSelect.appendChild(option);
                });
            }
        }

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            
            if (searchTerm === '') {
                renderForms(forms);
            } else {
                const filtered = forms.filter(form => 
                    form.name.toLowerCase().includes(searchTerm)
                );
                renderForms(filtered);
            }
        });

        // Handle keyboard navigation in search input
        searchInput.addEventListener('keydown', (e) => {
            const currentIndex = formSelect.selectedIndex;
            const optionsCount = formSelect.options.length;

            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    if (currentIndex < optionsCount - 1) {
                        formSelect.selectedIndex = currentIndex + 1;
                    }
                    break;
                
                case 'ArrowUp':
                    e.preventDefault();
                    if (currentIndex > 0) {
                        formSelect.selectedIndex = currentIndex - 1;
                    }
                    break;
                
                case 'Enter':
                    e.preventDefault();
                    const selectedOption = formSelect.options[formSelect.selectedIndex];
                    if (selectedOption && !selectedOption.disabled) {
                        const selectedId = selectedOption.value;
                        const selectedForm = forms.find(f => f.id === selectedId);
                        
                        if (selectedForm) {
                            selectedNameDiv.textContent = selectedForm.name;
                            selectedIdDiv.textContent = 'ID: ' + selectedForm.id;
                            selectedFormDiv.style.display = 'block';
                            console.log('Selected form via Enter:', selectedForm);
                        }
                    }
                    break;
            }
        });

        // Form selection
        formSelect.addEventListener('change', (e) => {
            const selectedId = e.target.value;
            const selectedForm = forms.find(f => f.id === selectedId);
            
            if (selectedForm) {
                selectedNameDiv.textContent = selectedForm.name;
                selectedIdDiv.textContent = 'ID: ' + selectedForm.id;
                selectedFormDiv.style.display = 'block';
                
                console.log('Selected form:', selectedForm);
            }
        });

        // Initial render
        renderForms(forms);
        console.log('Form selector initialized with', forms.length, 'forms');
    </script>
</body>
</html>